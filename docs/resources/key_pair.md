---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "spirl_key_pair Resource - spirl"
subcategory: ""
description: |-
  Generates a cryptographic key pair for use with SPIRL.
  This resource generates ED25519 key pairs that can be used for authentication between SPIRL components.
  SPIRL uses ED25519 keys for agents to authenticate with servers and for servers to authenticate with the SPIRL control plane.
  !> Warning: The private key is stored in Terraform state and should be handled with care.
  Consider using Terraform's sensitive attribute when referencing the private key in outputs.
  Please only use this for testing environments or where the terraform state file is encrypted and access is tightly controlled.
  Example usage:
  
  resource "spirl_key_pair" "cluster_key" {
    algorithm = "ed25519"
  }
  
  output "public_key" {
    value = spirl_key_pair.cluster_key.public_key_pem
  }
  
  output "private_key" {
    value     = spirl_key_pair.cluster_key.private_key_pem
    sensitive = true
  }
---

# spirl_key_pair (Resource)

Generates a cryptographic key pair for use with SPIRL.

This resource generates ED25519 key pairs that can be used for authentication between SPIRL components.
SPIRL uses ED25519 keys for agents to authenticate with servers and for servers to authenticate with the SPIRL control plane.

!> **Warning:** The private key is stored in Terraform state and should be handled with care.
   Consider using Terraform's `sensitive` attribute when referencing the private key in outputs.
	 Please only use this for testing environments or where the terraform state file is encrypted and access is tightly controlled.

Example usage:

```hcl
resource "spirl_key_pair" "cluster_key" {
  algorithm = "ed25519"
}

output "public_key" {
  value = spirl_key_pair.cluster_key.public_key_pem
}

output "private_key" {
  value     = spirl_key_pair.cluster_key.private_key_pem
  sensitive = true
}
```

## Example Usage

```terraform
# Generate an ED25519 key pair
resource "spirl_key_pair" "cluster_key" {
  algorithm = "ed25519"
}

# Create a trust domain
resource "spirl_trust_domain" "example" {
  domain_name = "example.com"
  description = "Example trust domain"
}

# Use the generated key pair in a cluster
resource "spirl_cluster" "example" {
  trust_domain_id = spirl_trust_domain.example.id
  name            = "my-cluster"
  description     = "Example cluster using generated key pair"
  platform        = "k8s"
  public_key      = spirl_key_pair.cluster_key.public_key_pem
}

# Output the public key (safe to expose)
output "public_key_pem" {
  description = "The public key in PEM format"
  value       = spirl_key_pair.cluster_key.public_key_pem
}

# Output the private key (marked as sensitive)
output "private_key_pem" {
  description = "The private key in PEM format"
  value       = spirl_key_pair.cluster_key.private_key_pem
  sensitive   = true
}

# Output the key pair ID
output "key_pair_id" {
  description = "The unique identifier for the key pair"
  value       = spirl_key_pair.cluster_key.id
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `algorithm` (String) The algorithm to use for key generation. Currently only 'ed25519' is supported.

### Read-Only

- `id` (String) Unique identifier for the key pair
- `private_key_pem` (String, Sensitive) The private key in PKCS#8 PEM format
- `public_key_pem` (String) The public key in PEM format
